#!/bin/sh

# This script is an imitation of locate from the mlocate package.
# It runs a grep command on a text file generated by the updatedb script.
# Any flags passed to this script will be passed to grep.

db=~/.cache/updatedb

if [ ! -f "$db" ]; then
    printf "Database doesn't exist. Generate now? [Y/n] " >&2
    read -r ans
    [ "$ans" = Y ] || [ "$ans" = y ] && { updatedb || exit 1; }
fi

grep -a "$@" "$db"
